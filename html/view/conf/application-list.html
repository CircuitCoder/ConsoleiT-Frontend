<div class="ci-card-container" type="1-col-wide">
  <div class="ci-card-col">
    <ci-card>
      <ci-card-title>
        提交状态
      </ci-card-title>
      <div class="mdl-card__supporting-text ci-annotation">
        {{ registrants.length == 0 ? "目前无人提交申请" : "目前有 " + registrants.length + " 人提交申请" }}
      </div>
    </ci-card>

    <ci-card [hideTitle]="true" class="ci-application-search">
      <input class="ci-application-search-input" [(ngModel)]="searchStr" #searchInput>
      <div class="ci-application-search-icon">
        <i class="material-icons">search</i>
      </div>
    </ci-card>

    <ci-card [hideTitle]="true">
      <div class="ci-card-table ci-entry-table ci-application-list">
        <table class="mdl-data-table">
          <thead>
            <th class="mdl-data-table__cell--non-numeric" (click)="sortBy('name')">
              姓名
              <i class="material-icons sort-indicator" [ngClass]="{ ascending: currentSort.ascending, sorted: currentSort.name === 'name' }">keyboard_arrow_down</i>
            </th>
            <th class="mdl-data-table__cell--non-numeric" (click)="sortBy('school')">
              学校
              <i class="material-icons sort-indicator" [ngClass]="{ ascending: currentSort.ascending, sorted: currentSort.name === 'school' }">keyboard_arrow_down</i>
            </th>
            <th class="mdl-data-table__cell--non-numeric" *ngFor="let kw of keywords" (click)="sortBy('keyword', kw.id)">
              {{ kw.field.title }}
              <i class="material-icons sort-indicator" [ngClass]="{ ascending: currentSort.ascending, sorted: currentSort.name === 'keyword' && currentSort.spec == kw.id }">keyboard_arrow_down</i>
            </th>
          </thead>
          <tbody>
            <!-- Using display for now since table rows can't be transformed -->
            <tr *ngFor="let entry of registrants" [ngStyle]="{ display: entry.visible ? 'table-row' : 'none' }" [routerLink]="['Application', { form: formId, uid: entry.user }]">
              <td class="mdl-data-table__cell--non-numeric">{{ entry.profile.realname }}</td>
              <td class="mdl-data-table__cell--non-numeric">{{ entry.profile.schoolName }}</td>
              <td class="mdl-data-table__cell--non-numeric" *ngFor="let kw of keywords">{{ getKwRepr(kw.field, entry.submission[kw.id]) }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </ci-card>
  </div>
</div>
